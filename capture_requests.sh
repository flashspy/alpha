#!/bin/bash
# æŠ“å–çœŸå® Claude Code çš„ HTTP è¯·æ±‚

echo "ğŸ“¡ å¼€å§‹æŠ“åŒ… Claude Code çš„è¯·æ±‚..."
echo ""
echo "æ­¥éª¤ï¼š"
echo "1. åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ: mitmproxy -p 8888"
echo "2. é…ç½®ä»£ç†: export HTTPS_PROXY=http://localhost:8888"
echo "3. è¿è¡Œ Claude Code å¹¶å‘é€ä¸€æ¡æ¶ˆæ¯"
echo "4. åœ¨ mitmproxy ä¸­æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…"
echo ""
echo "æˆ–è€…ä½¿ç”¨ tcpdump:"
echo ""
echo "sudo tcpdump -i any -A 'host moacode.org' -w claude_code_capture.pcap"
echo ""
echo "ç„¶åç”¨ wireshark åˆ†æ claude_code_capture.pcap"
echo ""
echo "å…³é”®ä¿¡æ¯è¦è®°å½•:"
echo "  - User-Agent"
echo "  - æ‰€æœ‰è‡ªå®šä¹‰è¯·æ±‚å¤´"
echo "  - x-api-key çš„å‘é€æ–¹å¼"
echo "  - anthropic-version"
echo "  - å…¶ä»– anthropic-* å¼€å¤´çš„å¤´"
echo ""
